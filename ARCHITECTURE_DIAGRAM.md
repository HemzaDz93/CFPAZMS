# ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

## Ù…Ø®Ø·Ø· Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ù…ØªØµÙØ­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Frontend)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  add_user.html â”‚ (ØµÙØ­Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…)
                    â”‚  edit_user.htmlâ”‚ (ØµÙØ­Ø© ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Checkboxes - Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©   â”‚
        â”‚  (Dashboard | Inventory | Reports ...) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Flask Backend Routes                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  routes/admin.py                                             â”‚
â”‚  â”œâ”€ add_user()           (Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…)                    â”‚
â”‚  â”œâ”€ edit_user()          (ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…)                    â”‚
â”‚  â””â”€ _update_user_permissions()  (Ø­ÙØ¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØ§Ù„ØªØ­Ù‚Ù‚                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  permissions_config.py                                       â”‚
â”‚  â”œâ”€ PERMISSIONS{}         (Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)                â”‚
â”‚  â”œâ”€ get_permissions_by_category()                           â”‚
â”‚  â”œâ”€ get_all_permissions_flat()                              â”‚
â”‚  â””â”€ get_category_permissions()                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Ø¬Ø¯ÙˆÙ„ users                                                  â”‚
â”‚  â”œâ”€ id                                                        â”‚
â”‚  â”œâ”€ username                                                  â”‚
â”‚  â”œâ”€ email                                                     â”‚
â”‚  â”œâ”€ password_hash                                            â”‚
â”‚  â”œâ”€ first_name                                               â”‚
â”‚  â””â”€ ... (Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰)                                      â”‚
â”‚         â†‘                                                     â”‚
â”‚         â”‚ 1:N                                                â”‚
â”‚         â”‚                                                    â”‚
â”‚  Ø¬Ø¯ÙˆÙ„ user_permissions                                       â”‚
â”‚  â”œâ”€ id                                                        â”‚
â”‚  â”œâ”€ user_id           (FK â†’ users.id)                       â”‚
â”‚  â”œâ”€ permission_key    (Ù…Ø«Ù„: inventory_view)                â”‚
â”‚  â”œâ”€ permission_name   (Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù)                  â”‚
â”‚  â”œâ”€ permission_category (inventory, equipment, ...)        â”‚
â”‚  â”œâ”€ is_allowed        (true/false)                         â”‚
â”‚  â”œâ”€ created_at                                              â”‚
â”‚  â””â”€ updated_at                                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   models.py (Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  class User(UserMixin, db.Model)                            â”‚
â”‚  â”œâ”€ has_granular_permission(perm_key)                      â”‚
â”‚  â”œâ”€ get_all_permissions()                                   â”‚
â”‚  â””â”€ user_permissions â† Relationship                         â”‚
â”‚                                                               â”‚
â”‚  class UserPermission(db.Model)  [Ø¬Ø¯ÙŠØ¯]                    â”‚
â”‚  â”œâ”€ user_id                                                  â”‚
â”‚  â”œâ”€ permission_key                                           â”‚
â”‚  â”œâ”€ is_allowed                                               â”‚
â”‚  â””â”€ ...                                                      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (app.py)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  context_processor()                                         â”‚
â”‚  â””â”€ inject_org_settings()                                   â”‚
â”‚     â””â”€ has_permission() â† Ù…ØªØ§Ø­ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙÙŠ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª (Routes):                                      â”‚
â”‚  if not current_user.has_granular_permission('inventory_view'):
â”‚      return redirect(...)                                    â”‚
â”‚                                                               â”‚
â”‚  ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ (Templates):                                    â”‚
â”‚  {% if has_permission('inventory_add') %}                  â”‚
â”‚      <button>Ø¥Ø¶Ø§ÙØ©</button>                                 â”‚
â”‚  {% endif %}                                                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### 1ï¸âƒ£ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
```
Ø§Ù„Ù…Ø¯ÙŠØ± ÙŠØ°Ù‡Ø¨ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…
        â†“
ÙŠÙ…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©
        â†“
ÙŠØ®ØªØ§Ø± Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ù† Ø§Ù„Ù€ checkboxes
        â†“
ÙŠØ¶ØºØ· "Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"
        â†“
Form POST Ø¥Ù„Ù‰ routes/admin.py
        â†“
add_user() ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        â†“
_update_user_permissions() ØªØ­ÙØ¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        â†“
Ø¬Ø¯ÙˆÙ„ user_permissions ÙŠØªÙ… Ù…Ù„Ø£Ù‡
        â†“
ØªÙ… âœ“
```

### 2ï¸âƒ£ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø©
        â†“
Ø§Ù„Ù…Ø³Ø§Ø± (Route) ÙŠÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
        â†“
current_user.has_granular_permission('permission_key')
        â†“
ØªØ¨Ø­Ø« ÙÙŠ Ø¬Ø¯ÙˆÙ„ user_permissions
        â†“
Ø¥Ø°Ø§ ÙƒØ§Ù†Øª is_allowed = True â†’ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ âœ“
Ø¥Ø°Ø§ ÙƒØ§Ù†Øª is_allowed = False â†’ Ø§Ù„Ø±ÙØ¶ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ âœ—
```

### 3ï¸âƒ£ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
```
ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        â†“
Ø§Ù„Ù‚Ø§Ù„Ø¨ ÙŠØ³ØªØ®Ø¯Ù… has_permission()
        â†“
ÙŠÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ø¯Ø§Ù„Ø© context processor
        â†“
Ø¥Ø°Ø§ True â†’ Ø¹Ø±Ø¶ Ø§Ù„Ø²Ø±/Ø§Ù„Ø¹Ù†ØµØ± âœ“
Ø¥Ø°Ø§ False â†’ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²Ø±/Ø§Ù„Ø¹Ù†ØµØ± âœ—
```

## Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… "Ø£Ù…ÙŠÙ† Ù…Ø®Ø²Ù†"

```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø¢Ø¯Ù…Ù†)
    â†“
ÙŠØ¯Ø®Ù„ Ø¥Ù„Ù‰: /admin/users/add
    â†“
ÙŠØ±Ù‰ form Ù…Ø¹ checkboxes Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
    â†“
ÙŠØ®ØªØ§Ø±:
  âœ… inventory_view
  âœ… inventory_add
  âœ… inventory_edit
  âŒ inventory_delete (Ù„Ø§ ÙŠÙ†Ù‚Ø± Ø¹Ù„ÙŠÙ‡Ø§)
    â†“
ÙŠØ¶ØºØ·: Ø­ÙØ¸
    â†“
POST /admin/users/add
    â†“
routes/admin.py:add_user()
    |
    â”œâ”€ User(name, email, ...) â†’ Ø¬Ø¯ÙˆÙ„ users
    â”‚   â””â”€ User ID: xyz123
    â”‚
    â””â”€ _update_user_permissions(xyz123, form_data)
        |
        â”œâ”€ Loop Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
        â”‚  |
        â”‚  â”œâ”€ perm_inventory_view â†’ is_allowed = True âœ“
        â”‚  â”œâ”€ perm_inventory_add â†’ is_allowed = True âœ“
        â”‚  â”œâ”€ perm_inventory_edit â†’ is_allowed = True âœ“
        â”‚  â”œâ”€ perm_inventory_delete â†’ is_allowed = False âœ—
        â”‚  â””â”€ ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª = False)
        â”‚
        â””â”€ db.session.add(UserPermission(...))
            â””â”€ Ø¬Ø¯ÙˆÙ„ user_permissions
                â”œâ”€ user_id: xyz123
                â”œâ”€ permission_key: inventory_view
                â”œâ”€ is_allowed: True
                â”œâ”€ ...
```

## Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ ÙØ­Øµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### Ø¯Ø§Ù„Ø© Ø§Ù„ÙØ­Øµ

```python
class User:
    def has_granular_permission(self, permission_key):
        return UserPermission.query.filter_by(
            user_id=self.id,
            permission_key=permission_key,
            is_allowed=True
        ).first() is not None
```

### ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø±

```python
@app.route('/inventory/items/delete/<id>', methods=['POST'])
@login_required
def delete_item(id):
    # Ø§Ù„ÙØ­Øµ 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
    if not current_user.has_granular_permission('inventory_delete'):
        return 403  # Forbidden
    
    # Ø§Ù„ÙØ­Øµ 2: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    item = Item.query.get_or_404(id)
    
    # ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø°Ù
    db.session.delete(item)
    db.session.commit()
    
    return redirect(url_for('inventory.list_items'))
```

### ÙÙŠ Ø§Ù„Ù‚Ø§Ù„Ø¨

```html
{% for item in items %}
    <tr>
        <td>{{ item.name }}</td>
        <td>
            {% if has_permission('inventory_delete') %}
                <form method="POST" 
                      action="/inventory/items/delete/{{ item.id }}">
                    <button type="submit" class="btn btn-danger">Ø­Ø°Ù</button>
                </form>
            {% endif %}
        </td>
    </tr>
{% endfor %}
```

## ØªØ¯ÙÙ‚ Ø§Ù„ÙØ­Øµ Ø§Ù„ÙƒØ§Ù…Ù„

```
Ø·Ù„Ø¨ HTTP: GET /inventory/items
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø§Ù„Ù…Ø³Ø§Ø± (Route)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ @app.route('/inventory/items')             â”‚
â”‚ @login_required                             â”‚
â”‚ def list_items():                           â”‚
â”‚     # â† ÙŠÙØ­Øµ Ù‡Ù†Ø§                           â”‚
â”‚     if not current_user.has_granular...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Ù‡Ù„ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ©ØŸ
    /       \
   âœ“        âœ—
   |        |
   â†“        â†“
Ø¹Ø±Ø¶        403 Forbidden
Ø§Ù„ØµÙØ­Ø©      + Redirect
   |
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø§Ù„Ù‚Ø§Ù„Ø¨ (Template)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {% if has_permission('inventory_add') %} â”‚
â”‚     <!-- Ø¹Ø±Ø¶ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->              â”‚
â”‚ {% endif %}                                â”‚
â”‚                                             â”‚
â”‚ {% if has_permission('inventory_delete') %} â”‚
â”‚     <!-- Ø¹Ø±Ø¶ Ø²Ø± Ø§Ù„Ø­Ø°Ù -->                â”‚
â”‚ {% endif %}                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©

```
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… â† ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙ„Ø§Ø­ÙŠØ©
    â†“
Ø§Ù„Ø­Ø§Ø¬Ø² 1: @login_required
    â†“ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹)
Ø§Ù„Ø­Ø§Ø¬Ø² 2: has_granular_permission()
    â†“ (ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù…Ø³Ù…ÙˆØ­Ø©)
Ø§Ù„Ø­Ø§Ø¬Ø² 3: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    â†“ (ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©)
âœ“ Ù†Ø¬Ø­ Ø§Ù„ÙˆØµÙˆÙ„
```

---

**Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ØªØ¹Ù…Ù„ Ù…Ø¹Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ù†Ø¸Ø§Ù… ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¢Ù…Ù† ÙˆÙ…ÙˆØ«ÙˆÙ‚!**